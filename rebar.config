{erl_opts, [debug_info,
            warn_missing_spec,
            {i, ["include"]},
            {src_dirs, ["src", "scenarios"]},
            {parse_transform, lager_transform}]}.

{eunit_compile_opts, [nowarn_missing_spec]}.

{plugins, [pc]}.

{require_otp_vsn, "^1[789]"}.

{deps, [
        {lager, ".*", {git, "git://github.com/basho/lager.git", {tag, "3.2.1"}}},
        {jiffy, ".*", {git, "https://github.com/davisp/jiffy.git", {tag, "0.14.7"}}},
        {trails, ".*", {git, "https://github.com/inaka/cowboy-trails.git", {tag, "0.1.1"}}},
        {cowboy_swagger, ".*", {git, "http://github.com/inaka/cowboy-swagger.git", {tag, "1.0.3"}}},
        {escalus, ".*", {git, "git://github.com/esl/escalus.git", {tag, "3.0.0"}}},
        {usec, ".*", {git, "git://github.com/esl/usec.git", {branch, "master"}}},
        {exometer, ".*", {git, "git://github.com/Feuerlabs/exometer.git", "7a7bd8d2b52de4d90f65aa3f6044b0e988319b9e"}},
        {lhttpc, ".*", {git, "git://github.com/esl/lhttpc.git", {branch, "otp-17-compat"}}},
        {mochijson2, ".*", {git, "git://github.com/bjnortier/mochijson2.git", {branch, "master"}}},
        {proper, ".*", {git, "git://github.com/manopapad/proper.git", {branch, "master"}}},
        {recon, ".*", {git, "https://github.com/ferd/recon.git", {tag, "2.2.1"}}},
        {cowboy, ".*", {git, "https://github.com/ninenines/cowboy.git", {tag, "1.0.4"}}},
        {fusco, ".*", {git, "https://github.com/esl/fusco.git"}}
       ]}.

{overrides, [
             {override, jiffy, [
                               {provider_hooks, [
                                                 {post, [
                                                         {compile, {pc, compile}},
                                                         {clean, {pc, clean}}
                                                        ]}
                                                ]}
                              ]}
            ]}.

{relx, [{release,
         {amoc, "0.9"},
         [amoc,
          {base16, load},
          {bear, load},
          {edown, load},
          {escalus, load},
          {exml, load},
          {folsom, load},
          {fusco, load},
          {hamcrest, load},
          {inets, load},
          {meck, load},
          {mochijson2, load},
          {parse_trans, load},
          {recon, load},
          {sasl, load},
          {usec, load},
          {xmerl, load},
          {wsecli, load},
          {runtime_tools, load},
          {wsock, load}]
        },
        {extended_start_script, true},
        {sys_config, "priv/app.config"},
        {include_src, false},
        {vm_args, "./priv/vm.args"},
        {overlay, [
                   {mkdir, "scenarios_ebin"},
                   {copy, "scenarios", "."}
                  ]}
       ]}.
